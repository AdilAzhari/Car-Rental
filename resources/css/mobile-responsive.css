/* ============================================
   MOBILE RESPONSIVE STYLES FOR FILAMENT ADMIN
   ============================================ */

/* ============================================
   1. MOBILE SIDEBAR (d640px)
   ============================================ */
@media (max-width: 640px) {
    /* Hide logo completely on mobile to save space */
    .fi-sidebar-header {
        display: none !important;
    }

    /* Move navigation to top */
    .fi-sidebar-nav,
    .fi-sidebar nav {
        padding-top: 0.5rem !important;
    }

    /* Sidebar dimensions */
    .fi-sidebar {
        width: 85% !important;
        max-width: 300px !important;
    }

    /* Sidebar items - touch-friendly */
    .fi-sidebar-item,
    .fi-sidebar-item-button {
        min-height: 44px !important;
        padding: 0.75rem 1rem !important;
        margin-bottom: 0.25rem !important;
        touch-action: manipulation !important;
    }

    /* Sidebar group labels */
    .fi-sidebar-group-label {
        padding: 0.5rem 1rem !important;
        font-size: 0.75rem !important;
        font-weight: 600 !important;
        text-transform: uppercase !important;
    }

    /* Sidebar navigation padding */
    .fi-sidebar-nav {
        padding: 0.5rem !important;
    }

    /* Sidebar content spacing */
    .fi-sidebar-content {
        padding-bottom: 2rem !important;
    }

    /* Single column for stats */
    [data-filament-stats-overview-widget] .fi-wi-stats-overview-stat-grid {
        grid-template-columns: repeat(1, minmax(0, 1fr)) !important;
    }

    /* Stat cards styling */
    .fi-wi-stats-overview-stat {
        padding: 1rem !important;
    }

    .fi-wi-stats-overview-stat-value {
        font-size: 1.5rem !important;
    }

    .fi-wi-stats-overview-stat-description {
        font-size: 0.75rem !important;
    }

    /* Topbar adjustments */
    .fi-topbar {
        padding-left: 1rem !important;
        padding-right: 1rem !important;
    }

    /* Main content padding */
    .fi-main {
        padding: 1rem !important;
    }

    /* Page headings */
    .fi-header-heading {
        font-size: 1.5rem !important;
    }

    .fi-section-header-heading {
        font-size: 1.25rem !important;
    }

    /* Section content */
    .fi-section-content {
        padding: 1rem !important;
    }

    .fi-section-header {
        padding: 1rem !important;
    }

    /* Breadcrumbs */
    .fi-breadcrumbs {
        flex-wrap: wrap !important;
    }
}

/* ============================================
   2. TABLET SIDEBAR (641px - 1024px)
   ============================================ */
@media (min-width: 641px) and (max-width: 1024px) {
    /* Compact logo on tablet */
    .fi-sidebar .fi-logo,
    .fi-sidebar-header img,
    .fi-sidebar-header .fi-logo,
    .fi-sidebar-header a img {
        max-height: 2rem !important;
        height: 2rem !important;
        max-width: 80px !important;
        object-fit: contain !important;
    }

    .fi-sidebar-header {
        min-height: 3rem !important;
        max-height: 3rem !important;
        padding: 0.5rem 1rem !important;
    }

    /* Hide brand text on tablet */
    .fi-sidebar-header .fi-brand-name,
    .fi-sidebar-header span:not(.fi-logo) {
        display: none !important;
    }

    /* 2 columns for stats */
    [data-filament-stats-overview-widget] .fi-wi-stats-overview-stat-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
    }

    /* Main content padding */
    .fi-main {
        padding: 1.5rem !important;
    }
}

/* ============================================
   3. SIDEBAR BEHAVIOR (d1024px)
   ============================================ */
@media (max-width: 1024px) {
    /* Sidebar overlay setup */
    .fi-sidebar {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        bottom: 0 !important;
        height: 100vh !important;
        z-index: 40 !important;
        transform: translateX(-100%) !important;
        transition: transform 0.3s ease-in-out !important;
        box-shadow: 2px 0 8px rgba(0, 0, 0, 0.15) !important;
        pointer-events: auto !important;
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch !important;
    }

    /* Sidebar open state */
    .fi-sidebar-open .fi-sidebar,
    [x-data*="sidebarOpen"] .fi-sidebar,
    body:has([data-sidebar-open="true"]) .fi-sidebar {
        transform: translateX(0) !important;
    }

    /* All sidebar children are clickable */
    .fi-sidebar * {
        pointer-events: auto !important;
    }

    /* Dark backdrop behind sidebar */
    body:has(.fi-sidebar-open)::before,
    body.fi-sidebar-open::before,
    body:has([data-sidebar-open="true"])::before {
        content: '' !important;
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        background-color: rgba(0, 0, 0, 0.5) !important;
        z-index: 35 !important;
        transition: opacity 0.3s ease-in-out !important;
        opacity: 1 !important;
        pointer-events: auto !important;
    }

    /* Prevent body scroll when sidebar is open */
    .fi-sidebar-open,
    body:has(.fi-sidebar-open),
    body:has([data-sidebar-open="true"]) {
        overflow: hidden !important;
    }

    /* Main content doesn't shift */
    .fi-main {
        margin-left: 0 !important;
        width: 100% !important;
    }

    /* Hamburger menu button */
    .fi-sidebar-open-btn,
    [data-sidebar-toggle],
    button[x-on\:click*="sidebar"] {
        z-index: 50 !important;
        min-width: 44px !important;
        min-height: 44px !important;
        padding: 0.5rem !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
    }

    /* Topbar spacing */
    .fi-topbar-start {
        gap: 0.5rem !important;
    }

    /* Active navigation item styling */
    .fi-sidebar-item.fi-active {
        background-color: rgba(245, 158, 11, 0.1) !important;
        border-left: 3px solid rgb(245, 158, 11) !important;
    }

    /* Custom scrollbar for sidebar */
    .fi-sidebar::-webkit-scrollbar {
        width: 4px !important;
    }

    .fi-sidebar::-webkit-scrollbar-track {
        background: transparent !important;
    }

    .fi-sidebar::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.2) !important;
        border-radius: 2px !important;
    }

    .dark .fi-sidebar::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.2) !important;
    }
}

/* ============================================
   4. RTL (RIGHT-TO-LEFT) SUPPORT
   ============================================ */
@media (max-width: 1024px) {
    [dir="rtl"] .fi-sidebar {
        left: auto !important;
        right: 0 !important;
        transform: translateX(100%) !important;
        box-shadow: -2px 0 8px rgba(0, 0, 0, 0.15) !important;
    }

    [dir="rtl"] .fi-sidebar-open .fi-sidebar,
    [dir="rtl"][x-data*="sidebarOpen"] .fi-sidebar,
    [dir="rtl"]:has([data-sidebar-open="true"]) .fi-sidebar {
        transform: translateX(0) !important;
    }

    [dir="rtl"] .fi-sidebar-item.fi-active {
        border-left: none !important;
        border-right: 3px solid rgb(245, 158, 11) !important;
    }
}

/* ============================================
   5. FORMS (d640px)
   ============================================ */
@media (max-width: 640px) {
    /* Single column forms */
    .fi-fo-grid,
    .grid {
        grid-template-columns: repeat(1, minmax(0, 1fr)) !important;
    }

    /* Form field labels */
    .fi-fo-field-wrp-label {
        margin-bottom: 0.5rem !important;
    }

    /* Form actions - stack vertically */
    .fi-fo-actions {
        flex-direction: column !important;
        gap: 0.5rem !important;
    }

    .fi-fo-actions > * {
        width: 100% !important;
    }

    /* Input fields - prevent iOS zoom */
    .fi-select,
    .fi-input {
        min-height: 44px !important;
        font-size: 16px !important;
    }
}

/* ============================================
   6. TABLES (d640px)
   ============================================ */
@media (max-width: 640px) {
    /* Horizontal scroll for tables */
    .fi-ta {
        overflow-x: auto !important;
    }

    .fi-ta-content {
        -webkit-overflow-scrolling: touch !important;
    }

    /* Table cells - larger touch targets */
    .fi-ta-cell {
        padding: 1rem !important;
    }

    /* Table header actions - stack vertically */
    .fi-ta-header-actions {
        flex-direction: column !important;
        gap: 0.5rem !important;
    }

    /* Hide less important columns (4th column onwards) */
    .fi-ta-cell:nth-child(n+4),
    .fi-ta-header-cell:nth-child(n+4) {
        display: none;
    }

    /* Pagination */
    .fi-ta-pagination {
        flex-direction: column !important;
        gap: 1rem !important;
    }

    .fi-ta-pagination-records {
        text-align: center !important;
    }

    /* Hide page numbers on mobile, keep prev/next */
    .fi-pagination-items {
        display: none !important;
    }

    /* Filters */
    .fi-ta-filters {
        flex-direction: column !important;
    }

    .fi-ta-filter {
        width: 100% !important;
    }
}

/* ============================================
   7. MODALS (d640px)
   ============================================ */
@media (max-width: 640px) {
    /* Full screen modals */
    .fi-modal {
        margin: 0 !important;
        max-width: 100% !important;
        height: 100vh !important;
        border-radius: 0 !important;
    }

    .fi-modal-content {
        padding: 1.5rem !important;
    }

    .fi-modal-header {
        padding: 1.5rem !important;
    }

    /* Modal footer actions - stack vertically */
    .fi-modal-footer {
        flex-direction: column !important;
        gap: 0.5rem !important;
        padding: 1.5rem !important;
    }

    .fi-modal-footer-actions {
        flex-direction: column-reverse !important;
        width: 100% !important;
    }

    .fi-modal-footer-actions > * {
        width: 100% !important;
    }
}

/* ============================================
   8. BUTTONS & ACTIONS (d640px)
   ============================================ */
@media (max-width: 640px) {
    /* Full width buttons */
    .fi-btn {
        width: 100% !important;
        justify-content: center !important;
    }
}

/* ============================================
   9. WIDGETS (d640px)
   ============================================ */
@media (max-width: 640px) {
    /* Widget spacing */
    .fi-wi {
        margin-bottom: 1rem !important;
        grid-column: span 1 / span 1 !important;
    }

    /* Chart widgets */
    .fi-wi-chart {
        min-height: 250px !important;
    }
}

/* ============================================
   10. DROPDOWNS & NOTIFICATIONS (d640px)
   ============================================ */
@media (max-width: 640px) {
    .fi-dropdown-panel {
        max-width: calc(100vw - 2rem) !important;
        right: 1rem !important;
    }
}

/* ============================================
   11. IMAGES (d640px)
   ============================================ */
@media (max-width: 640px) {
    .fi-fi-image,
    img {
        max-width: 100% !important;
        height: auto !important;
    }
}

/* ============================================
   12. TOUCH IMPROVEMENTS
   ============================================ */
@media (hover: none) and (pointer: coarse) {
    /* Minimum touch targets (44px × 44px) */
    .fi-btn,
    .fi-link,
    .fi-ta-row {
        min-height: 44px !important;
        min-width: 44px !important;
    }

    /* Better scrolling on touch devices */
    body {
        -webkit-overflow-scrolling: touch !important;
    }
}

/* ============================================
   13. SAFE AREA INSETS (Notched Phones)
   ============================================ */
@supports (padding: max(0px)) {
    @media (max-width: 640px) {
        .fi-topbar {
            padding-top: max(1rem, env(safe-area-inset-top)) !important;
        }

        .fi-sidebar {
            padding-top: max(0px, env(safe-area-inset-top)) !important;
            padding-bottom: max(0px, env(safe-area-inset-bottom)) !important;
        }

        .fi-main {
            padding-left: max(1rem, env(safe-area-inset-left)) !important;
            padding-right: max(1rem, env(safe-area-inset-right)) !important;
        }
    }
}

/* ============================================
   14. DESKTOP (e1025px)
   ============================================ */
@media (min-width: 1025px) {
    /* 3 columns for stats */
    [data-filament-stats-overview-widget] .fi-wi-stats-overview-stat-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
    }
}
