/* Mobile Responsive Styles for Filament Dashboard */

/* Responsive Grid System */
@media (max-width: 640px) {
    /* Mobile: Force single column for stats */
    [data-filament-stats-overview-widget] .fi-wi-stats-overview-stat-grid {
        grid-template-columns: repeat(1, minmax(0, 1fr)) !important;
    }

    /* Make sidebar full width when open on mobile */
    .fi-sidebar {
        width: 85% !important;
        max-width: 320px !important;
        transition: transform 0.3s ease-in-out !important;
    }

    /* Sidebar brand/logo area */
    .fi-sidebar-header {
        padding: 1rem !important;
    }

    /* Sidebar navigation items */
    .fi-sidebar-nav {
        padding: 0.5rem !important;
    }

    .fi-sidebar-item {
        padding: 0.75rem 1rem !important;
        margin-bottom: 0.25rem !important;
    }

    /* Sidebar group labels */
    .fi-sidebar-group-label {
        padding: 0.5rem 1rem !important;
        font-size: 0.75rem !important;
    }

    /* Collapsible sidebar items */
    .fi-sidebar-item-button {
        padding: 0.75rem 1rem !important;
        font-size: 0.875rem !important;
    }

    /* Adjust top bar for mobile */
    .fi-topbar {
        padding-left: 1rem !important;
        padding-right: 1rem !important;
    }

    /* Make tables scrollable horizontally */
    .fi-ta {
        overflow-x: auto !important;
    }

    /* Adjust form layouts for mobile */
    .fi-fo-field-wrp-label {
        margin-bottom: 0.5rem !important;
    }

    /* Stack form actions vertically */
    .fi-fo-actions {
        flex-direction: column !important;
        gap: 0.5rem !important;
    }

    .fi-fo-actions > * {
        width: 100% !important;
    }

    /* Make modal full screen on mobile */
    .fi-modal {
        margin: 0 !important;
        max-width: 100% !important;
        height: 100vh !important;
        border-radius: 0 !important;
    }

    /* Adjust widget cards */
    .fi-wi {
        margin-bottom: 1rem !important;
    }

    /* Make action buttons full width */
    .fi-btn {
        width: 100% !important;
        justify-content: center !important;
    }

    /* Stack table header actions */
    .fi-ta-header-actions {
        flex-direction: column !important;
        gap: 0.5rem !important;
    }

    /* Reduce padding on mobile */
    .fi-main {
        padding: 1rem !important;
    }

    /* Make breadcrumbs wrap properly */
    .fi-breadcrumbs {
        flex-wrap: wrap !important;
    }

    /* Hide less important columns on mobile tables */
    .fi-ta-cell:nth-child(n+4),
    .fi-ta-header-cell:nth-child(n+4) {
        display: none;
    }
}

@media (min-width: 641px) and (max-width: 768px) {
    /* Tablet: 2 columns for stats */
    [data-filament-stats-overview-widget] .fi-wi-stats-overview-stat-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
    }

    /* Adjust padding for tablets */
    .fi-main {
        padding: 1.5rem !important;
    }
}

@media (min-width: 769px) and (max-width: 1024px) {
    /* Desktop: 3 columns for stats */
    [data-filament-stats-overview-widget] .fi-wi-stats-overview-stat-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
    }
}

/* Touch-friendly improvements */
@media (hover: none) and (pointer: coarse) {
    /* Increase touch targets */
    .fi-btn,
    .fi-link,
    .fi-ta-row {
        min-height: 44px !important;
        min-width: 44px !important;
    }

    /* Add more padding to clickable elements */
    .fi-ta-cell {
        padding: 1rem !important;
    }

    /* Make dropdowns easier to tap */
    .fi-select,
    .fi-input {
        min-height: 44px !important;
        font-size: 16px !important; /* Prevents iOS zoom */
    }
}

/* Responsive Images */
@media (max-width: 640px) {
    .fi-fi-image,
    img {
        max-width: 100% !important;
        height: auto !important;
    }
}

/* Responsive Typography */
@media (max-width: 640px) {
    .fi-header-heading {
        font-size: 1.5rem !important;
    }

    .fi-section-header-heading {
        font-size: 1.25rem !important;
    }
}

/* Fix notification panel on mobile */
@media (max-width: 640px) {
    .fi-dropdown-panel {
        max-width: calc(100vw - 2rem) !important;
        right: 1rem !important;
    }
}

/* Responsive widgets layout */
@media (max-width: 640px) {
    /* Force full width for widgets */
    .fi-wi {
        grid-column: span 1 / span 1 !important;
    }

    /* Chart widgets responsive height */
    .fi-wi-chart {
        min-height: 250px !important;
    }
}

/* Responsive pagination */
@media (max-width: 640px) {
    .fi-ta-pagination {
        flex-direction: column !important;
        gap: 1rem !important;
    }

    .fi-ta-pagination-records {
        text-align: center !important;
    }

    /* Hide page number buttons on mobile, keep only prev/next */
    .fi-pagination-items {
        display: none !important;
    }
}

/* Responsive filters */
@media (max-width: 640px) {
    .fi-ta-filters {
        flex-direction: column !important;
    }

    .fi-ta-filter {
        width: 100% !important;
    }
}

/* Better spacing for mobile cards */
@media (max-width: 640px) {
    .fi-section-content {
        padding: 1rem !important;
    }

    .fi-section-header {
        padding: 1rem !important;
    }
}

/* Responsive column layout for forms */
@media (max-width: 640px) {
    /* Force single column for all form grids */
    .fi-fo-grid,
    .grid {
        grid-template-columns: repeat(1, minmax(0, 1fr)) !important;
    }
}

/* Fix sidebar toggle on mobile and tablet */
@media (max-width: 1024px) {
    /* Sidebar should be fixed and slide in from left */
    .fi-sidebar {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        bottom: 0 !important;
        height: 100vh !important;
        z-index: 40 !important;
        transform: translateX(-100%) !important;
        box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1) !important;
    }

    /* When sidebar is open, slide in */
    .fi-sidebar-open .fi-sidebar,
    [x-data*="sidebarOpen"] .fi-sidebar {
        transform: translateX(0) !important;
    }

    /* Add backdrop overlay when sidebar is open */
    .fi-sidebar-open::after,
    [x-data*="sidebarOpen"]::after {
        content: '' !important;
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        background-color: rgba(0, 0, 0, 0.5) !important;
        z-index: 30 !important;
        transition: opacity 0.3s ease-in-out !important;
        opacity: 1 !important;
    }

    /* Mobile menu toggle button styling */
    .fi-sidebar-open-btn,
    [data-sidebar-toggle] {
        z-index: 50 !important;
        min-width: 44px !important;
        min-height: 44px !important;
    }

    /* Ensure content doesn't get pushed when sidebar opens */
    .fi-main {
        margin-left: 0 !important;
        width: 100% !important;
    }

    /* Hide sidebar close button on desktop */
    .fi-sidebar-close {
        display: block !important;
        position: absolute !important;
        top: 1rem !important;
        right: 1rem !important;
        z-index: 50 !important;
    }
}

/* Additional mobile sidebar improvements */
@media (max-width: 640px) {
    /* Sidebar takes more width on smaller phones */
    .fi-sidebar {
        width: 85% !important;
        max-width: 300px !important;
    }

    /* Larger touch targets for mobile */
    .fi-sidebar-item-button,
    .fi-sidebar-item {
        min-height: 44px !important;
        touch-action: manipulation !important;
    }

    /* Better spacing for sidebar content */
    .fi-sidebar-content {
        padding-bottom: 2rem !important;
    }
}

/* Responsive stat cards */
@media (max-width: 640px) {
    .fi-wi-stats-overview-stat {
        padding: 1rem !important;
    }

    .fi-wi-stats-overview-stat-value {
        font-size: 1.5rem !important;
    }

    .fi-wi-stats-overview-stat-description {
        font-size: 0.75rem !important;
    }
}

/* Better scrolling on mobile */
@media (max-width: 640px) {
    body {
        -webkit-overflow-scrolling: touch !important;
    }

    .fi-ta-content {
        -webkit-overflow-scrolling: touch !important;
    }
}

/* Responsive action modals */
@media (max-width: 640px) {
    .fi-modal-content {
        padding: 1.5rem !important;
    }

    .fi-modal-header {
        padding: 1.5rem !important;
    }

    .fi-modal-footer {
        flex-direction: column !important;
        gap: 0.5rem !important;
        padding: 1.5rem !important;
    }

    .fi-modal-footer-actions {
        flex-direction: column-reverse !important;
        width: 100% !important;
    }

    .fi-modal-footer-actions > * {
        width: 100% !important;
    }
}

/* RTL Support for Sidebar on Mobile */
@media (max-width: 1024px) {
    [dir="rtl"] .fi-sidebar {
        left: auto !important;
        right: 0 !important;
        transform: translateX(100%) !important;
    }

    [dir="rtl"] .fi-sidebar-open .fi-sidebar,
    [dir="rtl"][x-data*="sidebarOpen"] .fi-sidebar {
        transform: translateX(0) !important;
    }

    [dir="rtl"] .fi-sidebar {
        box-shadow: -2px 0 8px rgba(0, 0, 0, 0.1) !important;
    }
}

/* Prevent body scroll when sidebar is open on mobile */
@media (max-width: 1024px) {
    .fi-sidebar-open,
    body:has(.fi-sidebar-open) {
        overflow: hidden !important;
    }
}

/* Smooth scrolling for sidebar navigation */
@media (max-width: 1024px) {
    .fi-sidebar {
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch !important;
        scrollbar-width: thin !important;
    }

    /* Hide scrollbar on mobile for cleaner look */
    .fi-sidebar::-webkit-scrollbar {
        width: 4px !important;
    }

    .fi-sidebar::-webkit-scrollbar-track {
        background: transparent !important;
    }

    .fi-sidebar::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.2) !important;
        border-radius: 2px !important;
    }
}

/* Fix topbar spacing with hamburger menu */
@media (max-width: 1024px) {
    .fi-topbar-start {
        gap: 0.5rem !important;
    }

    /* Hamburger menu button */
    button[x-on\:click*="sidebar"],
    .fi-sidebar-toggle {
        padding: 0.5rem !important;
        min-width: 44px !important;
        min-height: 44px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
    }
}

/* Improve logo visibility on mobile */
@media (max-width: 640px) {
    .fi-logo,
    .fi-sidebar .fi-logo,
    .fi-sidebar-header img,
    .fi-sidebar-header .fi-logo {
        max-height: 1.5rem !important;
        height: 1.5rem !important;
        width: auto !important;
    }

    .fi-sidebar-header {
        min-height: 56px !important;
        padding: 0.75rem 1rem !important;
        display: flex !important;
        align-items: center !important;
    }

    /* Also reduce brand name text size if present */
    .fi-sidebar-header .fi-brand-name {
        font-size: 0.875rem !important;
    }
}

/* Make logo even smaller on tablet sidebar */
@media (max-width: 1024px) {
    .fi-sidebar .fi-logo,
    .fi-sidebar-header img,
    .fi-sidebar-header .fi-logo {
        max-height: 1.75rem !important;
        height: 1.75rem !important;
    }
}

/* Better navigation active states on mobile */
@media (max-width: 1024px) {
    .fi-sidebar-item.fi-active {
        background-color: rgba(245, 158, 11, 0.1) !important;
        border-left: 3px solid rgb(245, 158, 11) !important;
    }

    [dir="rtl"] .fi-sidebar-item.fi-active {
        border-left: none !important;
        border-right: 3px solid rgb(245, 158, 11) !important;
    }
}

/* Safe area insets for notched phones */
@supports (padding: max(0px)) {
    @media (max-width: 640px) {
        .fi-topbar {
            padding-top: max(1rem, env(safe-area-inset-top)) !important;
        }

        .fi-sidebar {
            padding-top: max(0px, env(safe-area-inset-top)) !important;
            padding-bottom: max(0px, env(safe-area-inset-bottom)) !important;
        }

        .fi-main {
            padding-left: max(1rem, env(safe-area-inset-left)) !important;
            padding-right: max(1rem, env(safe-area-inset-right)) !important;
        }
    }
}
